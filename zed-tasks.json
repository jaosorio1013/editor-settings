// Project tasks configuration. See https://zed.dev/docs/tasks for documentation.
//
// Example:
[
  {
    "label": "Django: Makemigrations",
    "command": "uv run python manage.py makemigrations",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
    "cwd": "$ZED_WORKTREE_ROOT",
    "reveal_target": "center",
  },
  {
    "label": "Django: Migrate",
    "command": "uv run python manage.py migrate",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
    "cwd": "$ZED_WORKTREE_ROOT",
    "reveal_target": "center",
  },
  {
    "label": "Django: Run Tests (All)",
    "command": "uv run pytest",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
    "cwd": "$ZED_WORKTREE_ROOT",
    "reveal_target": "center",
  },
  {
    "label": "Django: RunServer",
    "command": "uv run python manage.py runserver",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
    "cwd": "$ZED_WORKTREE_ROOT",
  },
  {
    "label": "Django: Shell",
    "command": "uv run python manage.py shell",
    "use_new_terminal": true,
    "allow_concurrent_runs": false,
    "cwd": "$ZED_WORKTREE_ROOT",
  },

  {
    "label": "Django: Init New Project (uv)",
    "command": "uv init && uv add django django-unfold python-dotenv django-stubs && uv run django-admin startproject config . && touch .env && echo \"SECRET_KEY='$(uv run python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())')'\" > .env",
    "cwd": "$ZED_WORKTREE_ROOT",
    "use_new_terminal": true,
    // "context": "!project_has_file:manage.py",
  },

  // {
  //   "label": "Example task",
  //   "command": "for i in {1..5}; do echo \"Hello $i/5\"; sleep 1; done",
  //   //"args": [],
  //   // Env overrides for the command, will be appended to the terminal's environment from the settings.
  //   "env": { "foo": "bar" },
  //   // Current working directory to spawn the command into, defaults to current project root.
  //   //"cwd": "/path/to/working/directory",
  //   // Whether to use a new terminal tab or reuse the existing one to spawn the process, defaults to `false`.
  //   "use_new_terminal": false,
  //   // Whether to allow multiple instances of the same task to be run, or rather wait for the existing ones to finish, defaults to `false`.
  //   "allow_concurrent_runs": false,
  //   // What to do with the terminal pane and tab, after the command was started:
  //   // * `always` — always show the task's pane, and focus the corresponding tab in it (default)
  //   // * `no_focus` — always show the task's pane, add the task's tab in it, but don't focus it
  //   // * `never` — do not alter focus, but still add/reuse the task's tab in its pane
  //   "reveal": "always",
  //   // Where to place the task's terminal item after starting the task:
  //   // * `dock` — in the terminal dock, "regular" terminal items' place (default)
  //   // * `center` — in the central pane group, "main" editor area
  //   "reveal_target": "dock",
  //   // What to do with the terminal pane and tab, after the command had finished:
  //   // * `never` — Do nothing when the command finishes (default)
  //   // * `always` — always hide the terminal tab, hide the pane also if it was the last tab in it
  //   // * `on_success` — hide the terminal tab on task success only, otherwise behaves similar to `always`
  //   "hide": "never",
  //   // Which shell to use when running a task inside the terminal.
  //   // May take 3 values:
  //   // 1. (default) Use the system's default terminal configuration in /etc/passwd
  //   //      "shell": "system"
  //   // 2. A program:
  //   //      "shell": {
  //   //        "program": "sh"
  //   //      }
  //   // 3. A program with arguments:
  //   //     "shell": {
  //   //         "with_arguments": {
  //   //           "program": "/bin/bash",
  //   //           "args": ["--login"]
  //   //         }
  //   //     }
  //   "shell": "system",
  //   // Whether to show the task line in the output of the spawned task, defaults to `true`.
  //   "show_summary": true,
  //   // Whether to show the command line in the output of the spawned task, defaults to `true`.
  //   "show_command": true,
  //   // Represents the tags for inline runnable indicators, or spawning multiple tasks at once.
  //   // "tags": []
  // },
]
